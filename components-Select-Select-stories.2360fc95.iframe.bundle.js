"use strict";(self.webpackChunk_indec_form_builder=self.webpackChunk_indec_form_builder||[]).push([[925],{"./src/components/Select/Select.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,WithErrors:()=>WithErrors,WithReadOnlyMode:()=>WithReadOnlyMode,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var formik__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/formik/dist/formik.esm.js"),_utils_getWarnings__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/utils/getWarnings.js"),_utils_getSchemas__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/utils/getSchemas.js"),_Select__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Select/Select.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Select",component:_Select__WEBPACK_IMPORTED_MODULE_2__.A,argTypes:{backgroundColor:{control:"color"}}},options=[{id:1,name:"S1P1O1",value:"1",label:"Option 1",subOptions:[{id:1}]},{id:2,name:"S1P1O1",value:"2",label:"Option 2",subOptions:[{id:1}]},{id:3,name:"S1P1O1",value:"3",label:"Option 3",subOptions:[{id:1}]}],section={id:1,name:"S1",label:"SecciÃ³n 1",questions:[{id:1,label:"Write your name",name:"S1P1",number:"1",type:1,options,validations:[{id:1,rules:[{id:1,conditions:[{id:1,question:"S1P1",value:"",type:"eq",section:"S1"}]}],message:{text:"Must select an option",type:"error"}}],subQuestions:[],userVarName:"s1p1"}]};function Template(args){const{withErrors,withWarnings,initialValues,...props}=args,{errorSchema:validateSchema,warningSchema}=(0,_utils_getSchemas__WEBPACK_IMPORTED_MODULE_1__.A)({section,sections:[section]});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(formik__WEBPACK_IMPORTED_MODULE_4__.l1,{initialValues:{S1:[{S1P1:{id:1,answer:{value:initialValues||""}}}]},validationSchema:withErrors?validateSchema:null,onSubmit:()=>{},children:({values,submitForm})=>{const warnings=withWarnings&&(0,_utils_getWarnings__WEBPACK_IMPORTED_MODULE_5__.A)(warningSchema,values)||{};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(formik__WEBPACK_IMPORTED_MODULE_4__.D0,{component:_Select__WEBPACK_IMPORTED_MODULE_2__.A,...props,warnings,keyValue:"value"}),withErrors?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{type:"button",onClick:submitForm,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Click to validate form"}):null]})}})}const Basic=Template.bind({});Basic.args={disabled:!1,label:{text:"Select an option"},name:"S1.0.S1P1.answer.value",warnings:{},options};const WithReadOnlyMode=Template.bind({});WithReadOnlyMode.args={disabled:!0,label:{text:"Select an option"},name:"S1.0.S1P1.answer.value",warnings:{},options,initialValues:"2"};const WithErrors=Template.bind({});WithErrors.args={disabled:!1,label:{text:"Select an option"},name:"S1.0.S1P1.answer.value",warnings:{},withErrors:!0,options};const __namedExportsOrder=["Basic","WithReadOnlyMode","WithErrors"]},"./src/components/Select/Select.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_FieldMessage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/FieldMessage/index.js"),_InputLabel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/InputLabel/index.js"),_Icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Icons/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function Select(_ref){var _ref$options=_ref.options,options=void 0===_ref$options?[]:_ref$options,field=_ref.field,label=_ref.label,form=_ref.form,_ref$loading=_ref.loading,loading=void 0!==_ref$loading&&_ref$loading,onClean=_ref.onClean,_ref$placeholder=_ref.placeholder,placeholder=void 0===_ref$placeholder?"[Seleccione]":_ref$placeholder,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$keyValue=_ref.keyValue,keyValue=void 0===_ref$keyValue?"value":_ref$keyValue,_ref$warnings=_ref.warnings,warnings=void 0===_ref$warnings?{}:_ref$warnings,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),isOpen=_useState2[0],setIsOpen=_useState2[1],selectedValue=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return options.find((function(option){return option[keyValue]===field.value}))||null}),[null==field?void 0:field.value,options,keyValue]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"flex flex-col w-full",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_InputLabel__WEBPACK_IMPORTED_MODULE_2__.A,{warnings,form,field,label,disabled}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"relative mt-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("button",{type:"button",className:"w-full px-3 py-2 text-left bg-white border-2 border-gray-400 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 ".concat(disabled?"opacity-50 cursor-not-allowed bg-gray-50":"cursor-pointer hover:border-gray-500"),onClick:function onClick(){return!disabled&&setIsOpen(!isOpen)},onBlur:function onBlur(){form.handleBlur({target:{name:field.name}}),setTimeout((function(){return setIsOpen(!1)}),200)},disabled,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("span",{className:selectedValue?"text-gray-900":"text-gray-500",children:selectedValue?selectedValue.label:placeholder}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 space-x-1",children:[selectedValue&&!disabled&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{type:"button",onClick:function onClick(e){e.stopPropagation(),function handleClear(){form.setFieldValue(field.name,void 0),form.setFieldTouched(field.name,!1),onClean&&onClean(form)}()},className:"p-1 text-gray-400 hover:text-gray-600 rounded transition-colors duration-200","aria-label":"Clear selection",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Icons__WEBPACK_IMPORTED_MODULE_3__.uv,{className:"w-4 h-4"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Icons__WEBPACK_IMPORTED_MODULE_3__.D3,{className:"w-5 h-5 text-gray-400 transition-transform duration-200 ".concat(isOpen?"rotate-180":"")})]})]}),isOpen&&!disabled&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:[loading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"px-3 py-2 text-gray-500",children:"Cargando..."}),!loading&&0===options.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"px-3 py-2 text-gray-500",children:"No hay opciones."}),options.length>0&&options.map((function(option){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{type:"button",className:"w-full px-3 py-2 text-left hover:bg-blue-50 focus:outline-none focus:bg-blue-50 transition-colors duration-200 ".concat(selectedValue&&selectedValue[keyValue]===option[keyValue]?"bg-blue-100 text-blue-900":"text-gray-900"),onClick:function onClick(){return function handleChange(selectedValue){form.setFieldValue(field.name,selectedValue?selectedValue[keyValue]:void 0),form.setFieldTouched(field.name,!1),onClean&&onClean(form),setIsOpen(!1)}(option)},children:option.label},option[keyValue])}))]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_FieldMessage__WEBPACK_IMPORTED_MODULE_1__.A,{warnings,form,field})]})}const __WEBPACK_DEFAULT_EXPORT__=Select;Select.__docgenInfo={description:"",methods:[],displayName:"Select",props:{options:{defaultValue:{value:"[]",computed:!1},required:!1},loading:{defaultValue:{value:"false",computed:!1},required:!1},placeholder:{defaultValue:{value:"'[Seleccione]'",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1},keyValue:{defaultValue:{value:"'value'",computed:!1},required:!1},warnings:{defaultValue:{value:"{}",computed:!1},required:!1}}}}}]);